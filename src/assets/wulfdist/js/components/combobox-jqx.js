/*!
 * WULF v1.2.39 (http://wulf-demo.dynamic.nsn-net.net/)
 * Copyright Â© 2016-2017 Nokia. All rights Reserved.
 */
!function(a){"function"==typeof define&&define.amd?define(["jquery","jqxcombobox"],a):"object"==typeof module&&module.exports?module.exports=function(b,c){return void 0===c&&(c="undefined"!=typeof window?require("jquery"):require("jquery")(b)),a(c,require("jqxcombobox")),c}:a(jQuery)}(function(a){"use strict";a.jqx&&a.jqx._jqxComboBox&&a.extend(a.jqx._jqxComboBox.prototype,{defineInstance:function(){var b={pattern:"textfield",disabled:!1,width:"100%",height:30,items:new Array,selectedIndex:-1,selectedItems:new Array,_selectedItems:new Array,source:null,autoItemsHeight:!0,scrollBarSize:8,arrowSize:30,enableHover:!0,enableSelection:!0,visualItems:new Array,groups:new Array,equalItemsWidth:!0,itemHeight:-1,visibleItems:new Array,emptyGroupText:"Group",emptyString:"",openDelay:0,closeDelay:0,animationType:"default",dropDownWidth:"auto",dropDownHeight:"200px",autoDropDownHeight:!1,enableBrowserBoundsDetection:!1,dropDownHorizontalAlignment:"left",dropDownVerticalAlignment:"bottom",searchMode:"none",withClearButton:!1,autoComplete:!1,remoteAutoComplete:!1,remoteAutoCompleteDelay:500,selectionMode:"default",minLength:0,displayMember:"",valueMember:"",groupMember:"",searchMember:"",keyboardSelection:!0,renderer:null,autoOpen:!1,template:"",checkboxes:!1,promptText:"",placeHolder:"",rtl:!1,listBox:null,validateSelection:null,showCloseButtons:!0,renderSelectedItem:null,search:null,popupZIndex:1e5,searchString:null,multiSelect:!1,showArrow:!0,_disabledItems:new Array,touchMode:"auto",autoBind:!0,typeahead:!1,changeStatusIcon:!1,aria:{"aria-disabled":{name:"disabled",type:"boolean"}},statusIcon:{Error:"icon-error",Ok:"icon-ok",Spinner:"icon-spinner",Edited:"icon-edited",Mandatory:"icon-mandatory"},events:["open","close","select","unselect","change","checkChange","bindingComplete"]};return a.extend(!0,this,b),b},render:function(){var b=this;"tokenfield"==b.pattern&&(b.pattern="textfield",b.changeStatusIcon=!0,b.showArrow=!1,b.multiSelect=!1,b.typeahead=!0),b.typeahead&&(b.searchMode="startswith"),"menu-sm"==b.pattern&&(b.height=26,b.arrowSize=26);var c=b.element.nodeName.toLowerCase();if("select"==c||"ul"==c||"ol"==c){b.field=b.element,b.field.className&&(b._className=b.field.className);var d={title:b.field.title};b.field.id.length?d.id=b.field.id.replace(/[^\w]/g,"_")+"_jqxComboBox":d.id=a.jqx.utilities.createId()+"_jqxComboBox";var e=a("<div></div>",d);b.width||(b.width=a(b.field).width()),b.height||(b.height=a(b.field).outerHeight()),a(b.field).hide().after(e);var f=b.host.data();if(b.host=e,b.host.data(f),b.element=e[0],b.element.id=b.field.id,b.field.id=d.id,b._className&&(b.host.addClass(b._className),a(b.field).removeClass(b._className)),b.field.tabIndex){var g=b.field.tabIndex;b.field.tabIndex=-1,b.element.tabIndex=g}var h=a.jqx.parseSourceTag(b.field);b.source=h.items,-1==b.selectedIndex&&(b.selectedIndex=h.index)}b.removeHandlers(),b.isanimating=!1,b.id=a.jqx.utilities.createId(),b.element.innerHTML="";var i=a("<div style='background-color: transparent; -webkit-appearance: none; outline: none; width:100%; height: 100%; padding: 0px; margin: 0px; border: 0px; position: relative;float: left;'><div id='dropdownlistWrapper' style='padding: 0; margin: 0; border: none; background-color: transparent; float: left; width:100%; height: 100%; position: relative;'><div id='dropdownlistContent' style='padding: 0; border-right-width:1px; margin: 0; float: left; position: absolute;'/><button id='dropdownlistArrow' type='button' role='button' style='padding: 0; margin: 0; float: right; position: absolute;'/></div></div>");if(b.comboStructure=i,null==a.jqx._jqxListBox||void 0==a.jqx._jqxListBox)throw"jqxComboBox: Missing reference to jqxlistbox.js.";b.touch=a.jqx.mobile.isTouchDevice(),b.touchMode===!0&&(b.touch=!0),b.host.append(i),b.dropdownlistWrapper=b.host.find("#dropdownlistWrapper"),b.dropdownlistArrow=b.host.find("#dropdownlistArrow"),b.dropdownlistContent=b.host.find("#dropdownlistContent"),b.showArrow||b.dropdownlistContent.addClass("without-arrow"),!b.multiSelect&&b.showArrow&&b.dropdownlistContent.css("border-right-width",0),b.dropdownlistContent.addClass(b.toThemeProperty("jqx-combobox-content")),b.dropdownlistContent.addClass(b.toThemeProperty("jqx-widget-content")),b.dropdownlistWrapper[0].id="dropdownlistWrapper"+b.element.id,b.dropdownlistArrow[0].id="dropdownlistArrow"+b.element.id,b.dropdownlistContent[0].id="dropdownlistContent"+b.element.id,b.template&&b.dropdownlistArrow.addClass(b.toThemeProperty("jqx-"+b.template)),b.disabled&&b.dropdownlistArrow.attr("disabled",!0),"textfield"==b.pattern&&(b.multiSelect||b.changeStatusIcon?(b.inputWapper=a('<div class="inputWapper"></div>'),b.dropdownlistContent.append(b.inputWapper),b.dropdownlistContent.addClass("multiSelect"),b.inputWapper.append(a('<input autocomplete="off" style="box-sizing: border-box; margin: 0;" type="textarea"/>')),b.changeStatusIcon&&b.inputWapper.css("padding-right",19)):b.dropdownlistContent.append(a('<input autocomplete="off" style="box-sizing: border-box; margin: 0;" type="textarea"/>')),b.changeStatusIcon&&!b.showArrow&&(b.statusIconWapper=a('<div class="status-icon"><span class="icon icon-mandatory"></span></div>'),b.inputWapper.append(b.statusIconWapper)),b.input=b.dropdownlistContent.find("input"),b.showArrow||b.input.addClass("without-arrow"),b.input.addClass(b.toThemeProperty("jqx-combobox-input")),b.input.addClass(b.toThemeProperty("jqx-widget-content")),b.withClearButton&&(b.dropdownlistContent.append(a('<a class="n-clear-button-icon" href="javascript:void(0)" style="display: inline; right: 7px; display: none"> <span role="button" style="top:-1px; left:-1px" aria-lable="clear content" class="icon icon-close" id="TA-combobox-closeicon"></span></a>')),b.clearButton=b.dropdownlistContent.find("a")),b.host.attr("tabindex")&&(b.input.attr("tabindex",b.host.attr("tabindex")),b.host.removeAttr("tabindex"))),b.withClearButton&&b.input.css("padding-right","20px"),(!b.multiSelect&&!b.changeStatusIcon||"menu"==b.pattern||"menu-sm"==b.pattern)&&b.dropdownlistContent.addClass("single"),("menu"==b.pattern||"menu-sm"==b.pattern)&&(b.dropdownlistContent.append(a('<button type="button" class="btn n-combobutton-btn"  style="border-bottom-right-radius:0; border-top-right-radius:0; border-bottom-left-radius: 7px;border-top-left-radius: 7px"  data-toggle="tooltip" aria-expanded="false"><span class="selected-label"><span></span></span></button>')),b.menuButton=b.dropdownlistContent.find("button.n-combobutton-btn"),b.dropdownlistWrapper.addClass("btn-group").addClass("n-combobutton")),b._addInput(),b.rtl&&(b.input.css({direction:"rtl"}),b.dropdownlistContent.addClass(b.toThemeProperty("jqx-combobox-content-rtl")));try{var j="listBox"+b.id,k=a(a.find("#"+j));k.length>0&&k.remove(),a.jqx.aria(this,"aria-owns",j),a.jqx.aria(this,"aria-haspopup",!0),a.jqx.aria(this,"aria-multiline",!1),b.listBoxContainer&&b.listBoxContainer.jqxListBox("destroy"),b.container&&b.container.remove();var l=a("<div style='overflow: hidden; border: none; background-color: transparent; position: absolute;' id='listBox"+b.id+"'><div id='innerListBox"+b.id+"'></div></div>");l.hide(),l.appendTo(document.body),b.container=l,b.listBoxContainer=a(a.find("#innerListBox"+b.id));var m=b.width;"auto"!=b.dropDownWidth&&(m=b.dropDownWidth),null==b.dropDownHeight&&(b.dropDownHeight=200),b.container.width(parseInt(m)+25),b.addHandler(b.listBoxContainer,"bindingComplete",function(c){b.listBox||(b.listBox=a.data(b.listBoxContainer[0],"jqxListBox").instance),b._raiseEvent("6")});var n=!0;b.listBoxContainer.jqxListBox({autoItemsHeight:b.autoItemsHeight,_checkForHiddenParent:!1,allowDrop:!1,allowDrag:!1,checkboxes:b.checkboxes,emptyString:b.emptyString,autoBind:!b.remoteAutoComplete&&b.autoBind,renderer:b.renderer,rtl:b.rtl,itemHeight:b.itemHeight,selectedIndex:b.selectedIndex,incrementalSearch:!1,width:m,scrollBarSize:b.scrollBarSize,autoHeight:!1,groupMember:b.groupMember,searchMember:b.searchMember,displayMember:b.displayMember,valueMember:b.valueMember,source:b.source,theme:b.theme,height:b.dropDownHeight,rendered:function(){if(b.listBox=a.data(b.listBoxContainer[0],"jqxListBox").instance,b.listBoxContainer.parent().addClass("n-jqx-listbox"),b.listBox.vScrollBar&&(b.vScrolbar=a.data(b.listBox.vScrollBar[0],"jqxScrollBar").instance,b.vScrolbar.showButtons=!1),b.remoteAutoComplete)b.renderSelection("mouse"),b.multiSelect&&(p.typeaheadInput&&p.typeahead&&p.removeTypeahead(),b.doMultiSelect(!1));else if(b.autoDropDownHeight?(b.container.height(b.listBox.virtualSize.height+25),b.listBoxContainer.height(b.listBox.virtualSize.height),b.listBox._arrange()):(b.listBox._arrange(),b.listBox.ensureVisible(0),b.listBox._renderItems(),b.container.height(b.listBoxContainer.height()+25)),void 0!=b.searchString&&b.searchString.length>=b.minLength){var c=b.listBoxContainer.jqxListBox("items");c&&c.length>0?b.isOpened()||b.open():b.close()}else b.close();b.rendered&&b.rendered()}}),b.listBoxContainer.css({position:"absolute",zIndex:b.popupZIndex,top:.5,left:0}),b.listBoxContainer.css("border-top-width","1px"),b.listBoxContainer.addClass(b.toThemeProperty("jqx-popup")),a.jqx.browser.msie&&b.listBoxContainer.addClass(b.toThemeProperty("jqx-noshadow")),b.template&&b.listBoxContainer.addClass(b.toThemeProperty("jqx-"+b.template+"-item")),b.listBox=a.data(b.listBoxContainer[0],"jqxListBox").instance,b.listBox.enableSelection=b.enableSelection,b.listBox.enableHover=b.enableHover,b.listBox.equalItemsWidth=b.equalItemsWidth,b.listBox._arrange(),b.addHandler(b.listBoxContainer,"unselect",function(a){b.multiSelect||b._raiseEvent("3",{index:a.args.index,type:a.args.type,item:a.args.item})}),b.addHandler(b.listBoxContainer,"change",function(a){b.multiSelect||(b.selectedIndex=b.listBox.selectedIndex,b._raiseEvent("4",{index:a.args.index,type:a.args.type,item:a.args.item}))}),"none"==b.animationType?b.container.css("display","none"):b.container.hide(),n=!1}catch(o){throw o}var p=this;if("textfield"==p.pattern){p.input.attr("disabled",p.disabled);var q=a.jqx.browser.msie&&a.jqx.browser.version<8;q||p.input.attr("placeholder",p.placeHolder)}if(b.propertyChangeMap.disabled=function(b,c,d,e){e?(b.host.addClass(p.toThemeProperty("jqx-combobox-state-disabled")),b.host.addClass(p.toThemeProperty("jqx-fill-state-disabled")),b.dropdownlistContent.addClass(p.toThemeProperty("jqx-combobox-content-disabled"))):(b.host.removeClass(p.toThemeProperty("jqx-combobox-state-disabled")),b.host.removeClass(p.toThemeProperty("jqx-fill-state-disabled")),b.dropdownlistContent.removeClass(p.toThemeProperty("jqx-combobox-content-disabled"))),b.input.attr("disabled",b.disabled),a.jqx.aria(b,"aria-disabled",b.disabled),b.input.attr("disabled",b.disabled)},b.disabled&&(b.host.addClass(b.toThemeProperty("jqx-combobox-state-disabled")),b.host.addClass(b.toThemeProperty("jqx-fill-state-disabled")),b.dropdownlistContent.addClass(b.toThemeProperty("jqx-combobox-content-disabled"))),b.dropdownlistArrowIcon=a('<span class="caret"></span>'),"top"==b.dropDownVerticalAlignment?b.dropdownlistArrowIcon.addClass(b.toThemeProperty("jqx-icon-arrow-up")):b.dropdownlistArrowIcon.addClass(b.toThemeProperty("jqx-icon-arrow-down")),b.dropdownlistArrowIcon.addClass(b.toThemeProperty("jqx-icon")),b.dropdownlistArrow.append(b.dropdownlistArrowIcon),b.dropdownlistArrow.addClass(b.toThemeProperty("jqx-combobox-arrow-normal")),b.dropdownlistArrow.addClass(b.toThemeProperty("jqx-fill-state-normal-combobox")),b.rtl?b.dropdownlistArrow.addClass(b.toThemeProperty("jqx-rc-l")):b.dropdownlistArrow.addClass(b.toThemeProperty("jqx-rc-r")),b._setSize(),b._updateHandlers(),b.input&&b.addHandler(b.input,"keyup.textchange",function(c){if(39!=c.keyCode){b._search(c);b.cinput&&b.input&&(b.displayMember?b._updateInputSelection():b.cinput[0].value=b.input[0].value)}var d=b.input.val(),e=b.getItems(),f=-1,g=[];a.each(e,function(c){var e="";if(!this.isGroup){e=this.searchLabel?this.searchLabel:this.label?this.label:this.value?this.value:this.title?this.title:"jqxItem",e=e.toString();var h=!1;switch(b.searchMode){case"containsignorecase":h=a.jqx.string.containsIgnoreCase(e,d);break;case"contains":h=a.jqx.string.contains(e,d);break;case"equals":h=a.jqx.string.equals(e,d);break;case"equalsignorecase":h=a.jqx.string.equalsIgnoreCase(e,d);break;case"startswith":h=a.jqx.string.startsWith(e,d);break;case"startswithignorecase":h=a.jqx.string.startsWithIgnoreCase(e,d);break;case"endswith":h=a.jqx.string.endsWith(e,d);break;case"endswithignorecase":h=a.jqx.string.endsWithIgnoreCase(e,d)}if(b.autoComplete&&!h&&(this.visible=!1),h&&b.autoComplete&&(g[newItemsIndex++]=this,this.visible=!0,f=this.visibleIndex),""==d&&b.autoComplete&&(this.visible=!0,h=!1),b.multiSelect&&(this.disabled=!1,(b.selectedItems.indexOf(this.value)>=0||b._disabledItems.indexOf(this.value)>=0)&&(this.disabled=!0,h=!1)),b.multiSelect){if(h&&!b.autoComplete)return-1===f&&(f=this.visibleIndex),!0}else if(h&&!b.autoComplete)return f=this.visibleIndex,!1}});var h=b.listBox.getVisibleItem(f);h&&h.label===d&&(b.input.val(h.label),b.removeTypeahead(),h.element.click(),p.statusIconWapper&&p.statusIconWapper.find(".icon").removeClass("icon-edited").addClass("icon-ok"))}),a.jqx.browser.msie&&a.jqx.browser.version<8&&b.host.parents(".jqx-window").length>0){var r=b.host.parents(".jqx-window").css("z-index");l.css("z-index",r+10),b.listBoxContainer.css("z-index",r+10)}b.checkboxes?(b.input.attr("readonly",!0),a.jqx.aria(this,"aria-readonly",!0)):a.jqx.aria(this,"aria-readonly",!1),b.remoteAutoComplete||(b.searchString="")},_arrange:function(){var b=this,c=parseInt(this.host.width()),d=parseInt(this.host.height()),e=this.arrowSize,f=this.arrowSize;"menu-sm"==b.pattern&&(f=29);var g=1;this.showArrow||(f=0,e=0,this.dropdownlistArrow.hide(),g=0,this.host.css("cursor","arrow"));var h=c-f;if(h>0&&(this.multiSelect?this.showArrow?this.dropdownlistContent[0].style.width=h+"px":this.dropdownlistContent[0].style.width=h-2+"px":this.dropdownlistContent[0].style.width=h+1+g+"px",this.inputWapper&&(this.multiSelect?this.inputWapper[0].style.width=h+"px":(this.inputWapper[0].style.width=h+1+"px",this.inputWapper[0].style.height=d-2+"px"))),this.rtl&&(this.dropdownlistContent[0].style.width=-2+h+"px"),this.multiSelect?a(this.dropdownlistContent[0]).height(d-2+"px"):"menu-sm"==this.pattern?a(this.dropdownlistContent[0]).height("26px"):this.dropdownlistContent[0].style.height=d+"px",this.dropdownlistContent[0].style.left="0px",this.dropdownlistContent[0].style.top="0px","menu-sm"!=this.pattern?this.dropdownlistArrow[0].style.width=f+"px":this.dropdownlistArrow[0].style.width="29px",this.multiSelect?this.dropdownlistArrow.css("height","100%"):this.dropdownlistArrow[0].style.height=d+"px",this.dropdownlistArrow[0].style.right="-1px","textfield"==this.pattern){this.input[0].style.width="100%",this.statusIconWapper&&(this.statusIconWapper[0].style.height=d-2+"px"),this.multiSelect||this.input.css("height",d);var i=this.input.outerHeight();0==i&&(i=parseInt(this.input.css("font-size"))+3),-1==this.input[0].className.indexOf("jqx-rc-all")&&this.input.addClass(this.toThemeProperty("jqx-rc-all"))}if("menu"==this.pattern||"menu-sm"==this.pattern){this.menuButton[0].style.width="100%";var j=this.menuButton.height();0==j&&(j=parseInt(this.menuButton.css("font-size"))+3),-1==this.menuButton[0].className.indexOf("jqx-rc-all")&&this.menuButton.addClass(this.toThemeProperty("jqx-rc-all"))}parseInt(d)/2-parseInt(i)/2;if(this.rtl&&(this.dropdownlistArrow.css("left","0px"),this.dropdownlistContent.css("left",this.dropdownlistArrow.width()),a.jqx.browser.msie&&a.jqx.browser.version<=8&&this.dropdownlistContent.css("left",1+this.dropdownlistArrow.width())),this.multiSelect){this.input.css("float","left"),this.input[0].style.height=parseInt(b.height)-2+"px",this.dropdownlistWrapper.parent().css("height","auto"),this.dropdownlistContent.css("height","auto"),this.dropdownlistWrapper.css("height","auto"),this.dropdownlistContent.css("position","relative"),this.dropdownlistContent.css("cursor","text"),this.host.css("height","auto"),this.host.css("min-height",this.height),this.dropdownlistContent.css("min-height",parseInt(this.height)-2);var d=parseInt(this.host.height());this.dropdownlistArrow.css("height","100%");var k=parseInt(this.host.css("min-height"));parseInt(k)/2-parseInt(i)/2}},_updateHandlers:function(){var b=this,c=!1;this.removeHandlers(),this.multiSelect&&(this.addHandler(this.dropdownlistContent,"click",function(a){return a.target.href?!1:(b.input.focus(),void setTimeout(function(){b.input.focus()},10))}),this.addHandler(this.dropdownlistContent,"focus",function(a){return a.target.href?!1:(b.input.focus(),void setTimeout(function(){b.input.focus()},10))})),this.touch||(this.host.parents()&&this.addHandler(this.host.parents(),"scroll.combobox"+this.element.id,function(a){var c=b.isOpened();c&&b.close()}),this.addHandler(this.host,"mouseenter",function(){!b.disabled&&b.enableHover&&(c=!0,"top"==b.dropDownVerticalAlignment&&b.dropdownlistArrowIcon.addClass(b.toThemeProperty("jqx-icon-arrow-up")))}),this.addHandler(this.host,"mouseleave",function(){!b.disabled&&b.enableHover&&(c=!1)})),b.autoOpen&&(this.addHandler(this.host,"mouseenter",function(){var a=b.isOpened();!a&&b.autoOpen&&(b.open(),b.host.focus())}),this.addHandler(a(document),"mousemove."+b.id,function(a){var c=b.isOpened();if(c&&b.autoOpen){var d=b.host.coord(),e=d.top,f=d.left,g=b.container.coord(),h=g.left,i=g.top,j=!0;a.pageY>=e&&a.pageY<=e+b.host.height()+2&&a.pageX>=f&&a.pageX<f+b.host.width()&&(j=!1),a.pageY>=i&&a.pageY<=i+b.container.height()-20&&a.pageX>=h&&a.pageX<h+b.container.width()&&(j=!1),j&&b.close()}}));var d="mousedown";this.touch&&(d=a.jqx.mobile.getTouchEventName("touchstart"));var e=function(c){if(!b.disabled){var d=a(c.target),e="block"==b.container.css("display");if(d.is("span")&&(d=d.parent()),e?d.attr("aria-expanded",!1):d.attr("aria-expanded",!0),!b.isanimating){if(e)return b.hideListBox("api"),!0;if(b.autoDropDownHeight){b.container.height(b.listBoxContainer.height()+25);var f=b.listBoxContainer.jqxListBox("autoHeight");f||(b.listBoxContainer.jqxListBox({autoHeight:b.autoDropDownHeight}),b.listBox._arrange(),b.listBox.ensureVisible(0),b.listBox._renderItems(),b.container.height(b.listBoxContainer.height()+25))}if(b.showListBox("api"),a.jqx.mobile.isTouchDevice())return!0}}};this.addHandler(this.dropdownlistArrow,d,function(a){e(a)}),this.addHandler(this.dropdownlistArrowIcon,d,function(a){}),this.addHandler(this.dropdownlistArrow,"blur",function(c){var d=a(c.target),e="block"==b.container.css("display");return d.is("span")&&(d=d.parent()),e?(b.hideListBox("api"),d.attr("aria-expanded",!1),!0):void 0}),"textfield"==this.pattern&&(this.addHandler(this.input,"focus",function(a){b.focused=!0,b.dropdownlistContent.addClass("jqx-combobox-content-focus"),a.stopPropagation&&a.stopPropagation()}),this.addHandler(this.input,"blur",function(){var c=b.input.val();if(b.clearButton&&0==c.length&&b.clearButton.hide(),b.changeStatusIcon&&b.statusIconWapper){var d=b.statusIconWapper.find(".icon");a(this).val().length<1&&(d.hasClass("icon-error")&&d.hasClass("icon-ok")||d.removeClass().addClass("icon icon-mandatory"))}(b.multiSelect||b.changeStatusIcon)&&b.dropdownlistContent.removeClass("jqx-combobox-multiSelect-content-hover"),b.typeahead&&b.typeaheadInput&&b.removeTypeahead(),b.focused=!1,b.dropdownlistContent.removeClass("jqx-combobox-content-focus"),b.isOpened()||b.opening||"dropDownList"==b.selectionMode&&b._selectOldValue(),b._searchTimer&&clearTimeout(b._searchTimer)}),this.addHandler(this.input,"change",function(a){b.focused=!0;var c=b.input.val();b.clearButton&&0!=c.length&&b.clearButton.show(),a.stopPropagation&&a.stopPropagation()}),this.addHandler(this.dropdownlistContent,"mouseenter",function(a){b.multiSelect&&b.dropdownlistContent.addClass("jqx-combobox-multiSelect-content-hover"),a.stopPropagation&&a.stopPropagation()}),this.addHandler(this.dropdownlistContent,"mouseleave",function(a){(b.multiSelect||b.changeStatusIcon)&&b.dropdownlistContent.removeClass("jqx-combobox-multiSelect-content-hover"),a.stopPropagation&&a.stopPropagation()}),this.addHandler(this.input,"keyup",function(a){if(39!==a.keyCode){b.focused=!0;var c=b.input.val();b.clearButton&&0!=c.length&&b.clearButton.show(),b.clearButton&&0==c.length&&b.clearButton.hide()}}),this.clearButton&&this.addHandler(this.clearButton,"click",function(c){b.input.val("").focus(),a(this).hide()})),this.addHandler(a(document),"mousedown."+this.id,b.closeOpenedListBox,{me:this,listbox:this.listBox,id:this.id}),this.touch&&this.addHandler(a(document),a.jqx.mobile.getTouchEventName("touchstart")+"."+this.id,b.closeOpenedListBox,{me:this,listbox:this.listBox,id:this.id}),this.addHandler(this.host,"keydown",function(a){var c="block"==b.container.css("display");if(b.ctrlKey=a.ctrlKey,"none"==b.host.css("display"))return!0;if(b.statusIconWapper){var d=a.keyCode,f=[8,27,39,40,45,46,144,18,37,38,17,16,13,12,9,108];-1==f.indexOf(d)&&b.statusIconWapper.find(".icon").removeClass().addClass("icon-spinner icon")}if(("13"==a.keyCode||"32"==a.keyCode)&&(c||0==b.host.find("button:focus").length||e(a),c&&0!=b.host.find("button:focus").length&&(b.dropdownlistArrow.attr("aria-expanded",!1),b.hideListBox("keyboard"))),("13"==a.keyCode||"9"==a.keyCode)&&c&&!b.isanimating){if(-1!=b.listBox.selectedIndex){b.renderSelection("mouse");var g=b.listBox.selectedIndex,h=b.listBox.getVisibleItem(g);h&&(b.listBox.selectedValue=h.value),b._setSelection(b.input.val().length,b.input.val().length),b.hideListBox("keyboard")}return"13"==a.keyCode&&(b._oldvalue=b.listBox.selectedValue),b.keyboardSelection||b._raiseEvent("2",{index:b.selectedIndex,type:"keyboard",item:b.getItem(b.selectedIndex)}),"9"==a.keyCode?(b.changeStatusIcon&&b.statusIconWapper.find(".icon").removeClass("icon-edited").addClass("icon-ok"),!0):!1}if(115==a.keyCode)return b.isanimating||(b.isOpened()?b.isOpened()&&b.hideListBox("keyboard"):b.showListBox("keyboard")),!1;if(a.altKey&&"block"==b.host.css("display")&&(b.isanimating||(38==a.keyCode?b.isOpened()&&b.hideListBox("altKey"):40==a.keyCode&&(b.isOpened()||b.showListBox("altKey")))),("27"==a.keyCode||"9"==a.keyCode)&&b.isOpened()&&!b.isanimating){if("27"==a.keyCode)if(b.multiSelect)b.listBox.selectedValue=null,b.input.val("");else{var h=b.listBox.getItemByValue(b._oldvalue);h?setTimeout(function(){b.autoComplete&&b._updateItemsVisibility(""),b.listBox.selectIndex(h.index),b.renderSelection("api")},b.closeDelay):b.clearSelection()}return b.hideListBox("keyboard"),"9"==a.keyCode?!0:(b.renderSelection("api"),a.preventDefault(),!1)}var i=a.keyCode;if(c&&!b.disabled&&8!=i)return b.listBox._handleKeyDown(a);if(!b.disabled&&!c){var i=a.keyCode;if(33==i||34==i||35==i||36==i||38==i||40==i)return b.listBox._handleKeyDown(a)}if(8===i&&b.multiSelect&&0===b.input.val().length){var j=b.selectedItems[b.selectedItems.length-1];return b.selectedItems.pop(),b._selectedItems.pop(),j&&(b._raiseEvent("3",{index:j.index,type:"keyboard",item:j}),b._raiseEvent("4",{index:j.index,type:"keyboard",item:j})),b.listBox.selectedValue=null,b.typeaheadInput&&b.typeahead&&b.removeTypeahead(),b.doMultiSelect(),!1}}),this.addHandler(this.listBoxContainer,"checkChange",function(a){b.renderSelection("mouse"),b._updateInputSelection(),b._raiseEvent(5,{label:a.args.label,value:a.args.value,checked:a.args.checked,item:a.args.item})}),this.addHandler(this.listBoxContainer,"select",function(a){if(!b.disabled){if(("keyboard"!=a.args.type||b.keyboardSelection)&&(b.renderSelection(a.args.type),b.multiSelect||b._raiseEvent("2",{index:a.args.index,type:a.args.type,item:a.args.item}),"mouse"==a.args.type&&(b._oldvalue=b.listBox.selectedValue,!b.checkboxes))){if(b.hideListBox("mouse"),b.touch)return!1;b.input&&b.input.focus()}b.changeStatusIcon&&(b.removeTypeahead(),b.statusIconWapper.find(".icon").removeClass().addClass("icon-ok icon"))}}),null!=this.listBox&&null!=this.listBox.content&&this.addHandler(this.listBox.content,"click",function(a){if(!b.disabled){if(b.listBox.itemswrapper&&a.target===b.listBox.itemswrapper[0])return!0;if(a.target&&a.target.className&&a.target.className.indexOf("jqx-fill-state-disabled")>=0)return!0;b.renderSelection("mouse"),b._oldvalue=b.listBox.selectedValue,b.removeTypeahead(),b.changeStatusIcon&&b.statusIconWapper.find(".icon").removeClass().addClass("icon-ok icon"),b.touch||b.ishiding||b.checkboxes||(b.hideListBox("mouse"),b.input&&b.input.focus()),b.touch===!0&&(b.checkboxes||b.hideListBox("mouse"))}})},_setSize:function(){null!=this.width&&-1!=this.width.toString().indexOf("px")?this.host.width(this.width):void 0==this.width||isNaN(this.width)||this.host.width(this.width),null!=this.height&&-1!=this.height.toString().indexOf("px")?this.host.height(this.height):void 0==this.height||isNaN(this.height)||this.host.height(this.height);var b=!1;if(null!=this.width&&-1!=this.width.toString().indexOf("%")&&(b=!0,this.host.width(this.width)),null!=this.height&&-1!=this.height.toString().indexOf("%")&&(b=!0,this.host.height(this.height)),b){var c=this,d=this.host.width();"auto"!=this.dropDownWidth&&(d=this.dropDownWidth),this.listBoxContainer.jqxListBox({width:d}),this.container.width(parseInt(d)+25),this._arrange()}var c=this,e=function(){c.multiSelect||c.host.height(c.height),c._arrange(),c.multiSelect&&c.host.height("auto")};c.oldWidth=c.host.width(),c.oldHeight=c.host.height(),a.jqx.utilities.resize(this.host,function(){var a=c.host.width()==c.oldWidth-1?c.oldWidth:c.host.width(),b=c.host.height();(a!=c.oldWidth||b!=c.oldHeight)&&(e(),c.hideListBox("api")),c.oldWidth=a,c.oldHeight=b})},showListBox:function(b){if("textfield"==this.pattern&&(this.input.css("border-bottom-left-radius",0),this.dropdownlistContent.css("border-bottom-left-radius",0)),("menu"==this.pattern||"menu-sm"==this.pattern)&&(this.menuButton.css("border-bottom-left-radius",0),this.dropdownlistContent.css("border-bottom-left-radius",0)),this.dropdownlistArrow.css("border-bottom-right-radius",0),!this.listBox.items||0!=this.listBox.items.length){if("search"!=b||this.autoComplete||this.remoteAutoComplete||this.autoDropDownHeight&&this.container.height(this.listBoxContainer.height()+25),(this.autoComplete||this.multiSelect&&!this.remoteAutoComplete)&&"search"!=b&&(this._updateItemsVisibility(""),this.multiSelect))for(var c=this.getVisibleItems(),d=0;d<c.length;d++)if(!c[d].disabled){this.ensureVisible(d);break}if(this.remoteAutoComplete&&this.listBox.clearSelection(),"search"!=b&&(this._oldvalue=this.listBox.selectedValue),a.jqx.aria(this,"aria-expanded",!0),"auto"==this.dropDownWidth&&null!=this.width&&this.width.indexOf&&-1!=this.width.indexOf("%")&&this.listBox.host.width()!=this.host.width()){var e=this.host.width();this.listBoxContainer.jqxListBox({width:e}),this.container.width(parseInt(e)+25)}var f,g=this,h=this.listBoxContainer,i=this.listBox,j=(a(window).scrollTop(),a(window).scrollLeft(),parseInt(this._findPos(this.host[0])[1])+parseInt(this.host.outerHeight())-1+"px"),k=parseInt(Math.round(this.host.coord(!0).left));f=k+"px";var l=a.jqx.mobile.isSafariMobileBrowser()||a.jqx.mobile.isWindowsPhone();this.ishiding=!1;var m=a.jqx.utilities.hasTransform(this.host);(m||null!=l&&l)&&(f=a.jqx.mobile.getLeftPos(this.element),j=a.jqx.mobile.getTopPos(this.element)+parseInt(this.host.outerHeight()),"0px"!=a("body").css("border-top-width")&&(j=parseInt(j)-this._getBodyOffset().top+"px"),"0px"!=a("body").css("border-left-width")&&(f=parseInt(f)-this._getBodyOffset().left+"px")),"top"==this.dropDownVerticalAlignment?this.dropdownlistArrowIcon.addClass(this.toThemeProperty("jqx-icon-arrow-up-selected")):this.dropdownlistArrowIcon.addClass(this.toThemeProperty("jqx-icon-arrow-down-selected")),this.container.css("left",f),this.container.css("top",j),i._arrange();var n=!1;if("right"==this.dropDownHorizontalAlignment||this.rtl){var o=this.container.outerWidth(),p=Math.abs(o-this.host.width());o>this.host.width()?this.container.css("left",25+parseInt(Math.round(k))-p+"px"):this.container.css("left",25+parseInt(Math.round(k))+p+"px")}if("top"==this.dropDownVerticalAlignment){var q=h.height();n=!0,h.css("top",23),h.addClass(this.toThemeProperty("jqx-popup-up"));var r=parseInt(this.host.outerHeight()),s=parseInt(j)-Math.abs(q+r+23);this.container.css("top",s)}if(this.enableBrowserBoundsDetection){var t=this.testOffset(h,{left:parseInt(this.container.css("left")),top:parseInt(j)},parseInt(this.host.outerHeight()));parseInt(this.container.css("top"))!=t.top?(n=!0,h.css("top",23),h.addClass(this.toThemeProperty("jqx-popup-up"))):h.css("top",0),this.container.css("top",t.top),this.container.css("top",t.top),parseInt(this.container.css("left"))!=t.left&&this.container.css("left",t.left)}if("none"==this.animationType)this.container.css("display","block"),a.data(document.body,"openedCombojqxListBoxParent",g),a.data(document.body,"openedCombojqxListBox"+g.element.id,h),h.css("margin-top",0),h.css("opacity",1);else{this.container.css("display","block");var u=h.outerHeight();h.stop(),"fade"==this.animationType?(h.css("margin-top",0),h.css("opacity",0),h.animate({opacity:1},this.openDelay,function(){g.isanimating=!1,g.opening=!1,a.data(document.body,"openedCombojqxListBoxParent",g),a.data(document.body,"openedCombojqxListBox"+g.element.id,h)})):(h.css("opacity",1),n?h.css("margin-top",u):h.css("margin-top",-u),this.isanimating=!0,this.opening=!0,h.animate({"margin-top":0},this.openDelay,function(){g.isanimating=!1,g.opening=!1,a.data(document.body,"openedCombojqxListBoxParent",g),a.data(document.body,"openedCombojqxListBox"+g.element.id,h)}))}i._renderItems(),n?(this.host.addClass(this.toThemeProperty("jqx-rc-t-expanded")),h.addClass(this.toThemeProperty("jqx-rc-b-expanded")),this.dropdownlistArrow.addClass(this.toThemeProperty("jqx-rc-t-expanded"))):(this.host.addClass(this.toThemeProperty("jqx-rc-b-expanded")),h.addClass(this.toThemeProperty("jqx-rc-t-expanded"))),h.addClass(this.toThemeProperty("jqx-fill-state-focus")),this._raiseEvent("0",i);var v=h.find('div[role="option"] span');if(v.each(function(b,c){var d=a(c),e=d.html();d.html(""),d.append('<span class="option">'+e+"</span>")}),g._disabledItems){var v=h.find('div[role="option"]>span');a.each(g._disabledItems,function(a,b){var c=v.eq(b-1);c.addClass("disable").css("color","#AAA").css("cursor","not-allowed"),c.find(">span .option").addClass("disable"),c.find(".option").addClass("disable").end().parent().addClass("disable").mousedown(function(){return!1})})}}},hideListBox:function(b){this.dropdownlistArrow.attr("aria-expanded",!1),"textfield"==this.pattern&&(this.input.css("border-bottom-left-radius",7),this.dropdownlistContent.css("border-bottom-left-radius",7)),("menu"==this.pattern||"menu-sm"==this.pattern)&&(this.menuButton.css("border-bottom-left-radius",7),this.dropdownlistContent.css("border-bottom-left-radius",7)),this.dropdownlistArrow.css("border-bottom-right-radius",7);var c=this.listBoxContainer,d=this.listBox,e=this.container;if("none"!=this.container[0].style.display){a.jqx.aria(this,"aria-expanded",!1),("keyboard"==b||"mouse"==b)&&(this.listBox.searchString=""),("keyboard"==b||"mouse"==b&&this.multiSelect)&&(this.typeaheadInput&&this.typeahead&&this.removeTypeahead(),this.doMultiSelect());var f=this;if(a.data(document.body,"openedCombojqxListBox"+this.element.id,null),"none"==this.animationType)this.opening=!1,this.container.css("display","none");else if(!this.ishiding){var g=c.outerHeight();c.css("margin-top",0),c.stop(),this.opening=!1,this.isanimating=!0;var h=-g;parseInt(this.container.coord().top)<parseInt(this.host.coord().top)&&(h=g),"fade"==this.animationType?(c.css({opacity:1}),c.animate({opacity:0},this.closeDelay,function(){f.isanimating=!1,e.css("display","none"),f.ishiding=!1})):c.animate({"margin-top":h},this.closeDelay,function(){f.isanimating=!1,e.css("display","none"),f.ishiding=!1})}this.ishiding=!0,this.host.removeClass(this.toThemeProperty("jqx-combobox-state-selected")),this.dropdownlistArrowIcon.removeClass(this.toThemeProperty("jqx-icon-arrow-down-selected")),
this.dropdownlistArrowIcon.removeClass(this.toThemeProperty("jqx-icon-arrow-up-selected")),this.dropdownlistArrow.removeClass(this.toThemeProperty("jqx-combobox-arrow-selected")),this.dropdownlistArrow.removeClass(this.toThemeProperty("jqx-fill-state-pressed")),this.focused||(this.host.removeClass(this.toThemeProperty("jqx-combobox-state-focus")),this.host.removeClass(this.toThemeProperty("jqx-fill-state-focus")),this.dropdownlistContent.removeClass(this.toThemeProperty("jqx-combobox-content-focus"))),this.host.removeClass(this.toThemeProperty("jqx-rc-b-expanded")),c.removeClass(this.toThemeProperty("jqx-rc-t-expanded")),this.host.removeClass(this.toThemeProperty("jqx-rc-t-expanded")),c.removeClass(this.toThemeProperty("jqx-rc-b-expanded")),c.removeClass(this.toThemeProperty("jqx-fill-state-focus")),this.dropdownlistArrow.removeClass(this.toThemeProperty("jqx-rc-t-expanded")),this._raiseEvent("1",d)}},renderSelection:function(b){if(void 0!=b&&"none"!=b&&this._disableSelection!==!0&&null!=this.listBox&&!this.multiSelect){var c=this.listBox.visibleItems[this.listBox.selectedIndex];if(this.autoComplete&&!this.checkboxes&&void 0!==this.listBox.selectedValue)var c=this.getItemByValue(this.listBox.selectedValue);if(this.checkboxes){var d=this.getCheckedItems();c=null!=d&&d.length>0?d[0]:null}if(null==c){var e=a.jqx.browser.msie&&a.jqx.browser.version<8;return this.input.val(""),this.input.attr("value",""),e||this.input.attr("placeholder",this.placeHolder),void this._updateInputSelection()}this.selectedIndex=this.listBox.selectedIndex;var f=a("<span></span>");void 0!=c.label&&null!=c.label&&c.label.toString().length>0?a.jqx.utilities.html(f,c.label):void 0!=c.value&&null!=c.value&&c.value.toString().length>0?a.jqx.utilities.html(f,c.value):void 0!=c.title&&null!=c.title&&c.title.toString().length>0?a.jqx.utilities.html(f,c.title):a.jqx.utilities.html(f,this.emptyString);f.outerHeight();if(this.checkboxes){for(var g=this.getCheckedItems(),h="",i=0;i<g.length;i++)h+=i==g.length-1?g[i].label:g[i].label+", ";this.input.val(h)}else"textfield"==this.pattern&&(this.input.val(f.text()),this.withClearButton&&this.clearButton.show()),("menu"==this.pattern||"menu-sm"==this.pattern)&&this.menuButton.find("span span").html(f.text());if(f.remove(),this._updateInputSelection(),this.renderSelectedItem){var j=this.renderSelectedItem(this.listBox.selectedIndex,c);void 0!=j&&(this.input[0].value=j)}this.listBox&&this.listBox._activeElement&&a.jqx.aria(this,"aria-activedescendant",this.listBox._activeElement.id)}},doMultiSelect:function(b){this.checkboxes&&(this.multiSelect=!1);var c=this;if(!this.multiSelect){var d=c.dropdownlistContent.find(".jqx-button"),e="mousedown";return this.touch&&(e=a.jqx.mobile.getTouchEventName("touchstart")),this.removeHandler(d,e),this.removeHandler(d.find(".jqx-icon-close"),e),d.remove(),this.selectedItems=new Array,void(this._selectedItems=new Array)}if(this.validateSelection){var f=this.validateSelection(this.listBox.selectedValue);if(!f)return}this.selectedItems;if(this.listBox.selectedValue){if(-1===this.selectedItems.indexOf(this.listBox.selectedValue)){var g=this.getItemByValue(this.listBox.selectedValue);g&&g.visible&&(this.selectedItems.push(this.listBox.selectedValue),this._selectedItems.push(g),this._raiseEvent("2",{index:g.index,item:g}),this._raiseEvent("4",{index:g.index,item:g}))}this.listBox.selectedIndex=0}for(var h=this.listBox.items,i=0;i<h.length;i++)h[i].disabled=!1,(this.selectedItems.indexOf(h[i].value)>=0||this._disabledItems.indexOf(this.value)>=0)&&(h[i].disabled=!0);this.listBox._renderItems(),this.searchString="",this.input.val("");var h="",e="mousedown",d=c.dropdownlistContent.find(".jqx-button");this.touch&&(e=a.jqx.mobile.getTouchEventName("touchstart")),this.removeHandler(d,e),this.removeHandler(d.find(".jqx-icon-close"),e),d.remove(),c.input.detach(),this.selectedItems.length>0?(c.input.css("width","25px"),c.input.attr("placeholder","")):(c.input.css("width","100%"),c.input.attr("placeholder",this.placeHolder)),a.each(this.selectedItems,function(b){var d=c.getItemByValue(this);(!d||c.remoteAutoComplete)&&(d=c._selectedItems[b]);var e=a('<div style="overflow: hidden; float: left;"></div>');if(e.addClass(c.toThemeProperty("jqx-button")),e.addClass(c.toThemeProperty("jqx-combobox-multi-item")),e.addClass(c.toThemeProperty("jqx-fill-state-normal")),e.addClass(c.toThemeProperty("jqx-rc-all")),d){var f=d.label;if(c.renderSelectedItem){var g=c.renderSelectedItem(b,d);g&&(f=g)}""==e[0].innerHTML&&(e[0].innerHTML='<a data-value="'+d.value+'" style="float: left;" href="#">'+f+"</a>"),c.rtl&&(e[0].innerHTML='<a data-value="'+d.value+'" style="float: right;" href="#">'+f+"</a>");var h=c.rtl?"left":"right";if(c.showCloseButtons){var i='<div style="position: relative; overflow: hidden; float: '+h+'; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 100%; top: 50%; margin-left: -18px; margin-top: -7px; float: none; width: 15px; height: 15px;" class="n-clear-button-icon"><span role="button" style="top:-1px; left:0" aria-lable="clear content" class="icon icon-close" ></span></div></div>';if(a.jqx.browser.msie&&a.jqx.browser.version<8&&(i='<div style="position: relative; overflow: hidden; float: left; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 100%; top: 50%; margin-left: -18px; margin-top: -7px; float: none; width: 15px; height: 15px;" class="n-clear-button-icon">span role="button" style="top:-1px; left:0" aria-lable="clear content" class="icon icon-close" </div></div>'),c.rtl){var i='<div style="position: relative; overflow: hidden; float: '+h+'; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 0px; top: 50%; margin-top: -7px; float: none; width: 15px; height: 15px;" class="n-clear-button-icon">span role="button" style="top:-1px; left:0" aria-lable="clear content" class="icon icon-close" </div></div>';a.jqx.browser.msie&&a.jqx.browser.version<8&&(i='<div style="position: relative; overflow: hidden; float: left; min-height: 16px; min-width: 18px;"><div style="position: absolute; left: 0px; top: 50%; margin-top: -7px; float: none; width: 15px; height: 15px;" class="n-clear-button-icon">span role="button" style="top:-1px; left:0px" aria-lable="clear content" class="icon icon-close" </div></div>')}e[0].innerHTML+=i}}else""==e[0].innerHTML&&(e[0].innerHTML='<a href="#"></a>');c.inputWapper.append(e)}),c.inputWapper.append(c.input),c.input.css("height","28px"),c.input.val(""),b!==!1&&(c.input.focus(),setTimeout(function(){c.input.focus()},10));var d=c.dropdownlistContent.find(".jqx-button");this.touchMode===!0&&(e="mousedown"),this.addHandler(d,e,function(b){if(b.target.className.indexOf("jqx-icon-close")>=0)return!0;if(c.disabled)return!0;var d=a(b.target).attr("data-value"),e=c.getItemByValue(d);return e&&(c.listBox.selectedValue=null,c.listBox.clearSelection()),c.listBox.scrollTo(0,0),c.open(),b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation(),!1}),this.addHandler(d.find(".n-clear-button-icon"),e,function(b){if(!c.disabled){var d=a(b.target).parent().parent().parent().find("a").attr("data-value"),e=c.getItemByValue(d);if(e||c.remoteAutoComplete&&!e&&c.selectedItems.indexOf(d)>=0){c.listBox.selectedValue=null;var f=c.selectedItems.indexOf(d),g=e&&e.index>=0?e.index:f;if(f>=0){c.selectedItems.splice(f,1);var h=c._selectedItems[f];h||(h=e),c._selectedItems.splice(f,1),c._raiseEvent("3",{index:g,type:"mouse",item:h}),c._raiseEvent("4",{index:g,type:"mouse",item:h}),c.typeaheadInput&&c.typeahead&&c.removeTypeahead(),c.doMultiSelect()}else for(var i=0;i<c.selectedItems.length;i++){var h=c.selectedItems[i];if(h==d){c.selectedItems.splice(i,1),c._selectedItems.splice(i,1),c._raiseEvent("3",{index:g,type:"mouse",item:e}),c._raiseEvent("4",{index:g,type:"mouse",item:e}),c.typeaheadInput&&c.typeahead&&c.removeTypeahead(),c.doMultiSelect();break}}}}}),c.dropdownlistArrow.css("height","100%"),c.statusIconWapper&&c.statusIconWapper.height(this.host.height()-2),c._updateInputSelection()},_search:function(b){var c=this;if(c.dropdownlistContent.find(".typeahead")&&c.dropdownlistContent.find(".typeahead").remove(),9!=b.keyCode&&"none"!=c.searchMode&&null!=c.searchMode&&"undefined"!=c.searchMode&&16!=b.keyCode&&17!=b.keyCode&&20!=b.keyCode&&!c.checkboxes){if(c.multiSelect){var d=a("<span style='visibility: hidden; white-space: nowrap;'>"+c.input.val()+"</span>");d.addClass(c.toThemeProperty("jqx-widget")),a(document.body).append(d);var e=d.width()+15;d.remove(),e>c.host.width()&&(e=c.host.width()),25>e&&(e=25),c.input.css("width",e+"px"),0==c.selectedItems.length?(c.input.css("width","100%"),c.input.attr("placeholder",c.placeHolder)):c.input.attr("placeholder","");var f=parseInt(this._findPos(c.host[0])[1])+parseInt(c.host.outerHeight())-1+"px",g=a.jqx.mobile.isSafariMobileBrowser()||a.jqx.mobile.isWindowsPhone();null!=g&&g&&(f=a.jqx.mobile.getTopPos(this.element)+parseInt(c.host.outerHeight()),"0px"!=a("body").css("border-top-width")&&(f=parseInt(f)-this._getBodyOffset().top+"px")),c.container.css("top",f);parseInt(c.host.height());c.dropdownlistArrow.height("100%")}if(!c.isanimating){if(b.altKey&&38==b.keyCode)return c.hideListBox("altKey"),!1;if(b.altKey&&40==b.keyCode)return c.isOpened()||c.showListBox("altKey"),!1}if(37==b.keyCode)return!1;if(!b.altKey&&18!=b.keyCode&&!(b.keyCode>=33&&b.keyCode<=40||(b.ctrlKey||c.ctrlKey)&&88!=b.keyCode&&86!=b.keyCode)){var h=c.input.val();if(0==h.length&&!c.autoComplete)return c.listBox.searchString=c.input.val(),c.listBox.clearSelection(),c.hideListBox("search"),void(c.searchString=c.input.val());if(c.remoteAutoComplete){var i=this,j=function(){i.listBox.vScrollInstance.value=0};if(h.length>=i.minLength){if(!b.ctrlKey&&!b.altKey){if(i.searchString!=h){var k=i.listBoxContainer.jqxListBox("source");null==k&&i.listBoxContainer.jqxListBox({source:i.source}),c._searchTimer&&clearTimeout(c._searchTimer),13!=b.keyCode&&27!=b.keyCode&&(c._searchTimer=setTimeout(function(){if(j(),i.autoDropDownHeight&&(i.listBox.autoHeight=!0),i.searchString=i.input.val(),null==i.search)throw"'search' function is not defined";i.search(i.input.val())},c.remoteAutoCompleteDelay))}i.searchString=h}}else c._searchTimer&&clearTimeout(c._searchTimer),j(),i.searchString="",i.listBoxContainer.jqxListBox({source:null})}else{var i=this;if(h!==i.searchString){if("27"!=b.keyCode&&"13"!=b.keyCode){var l=c._updateItemsVisibility(h),m=l.matchItems,n=l.index;if(!c.autoComplete&&!c.removeAutoComplete&&(!c.multiSelect||c.multiSelect&&n>=0)){c.listBox.selectIndex(n);var o=c.listBox.isIndexInView(n);o?c.listBox._renderItems():c.listBox.ensureVisible(n)}c.autoComplete&&0===m.length&&c.hideListBox("search")}if("13"==b.keyCode){var p="block"==c.container.css("display");if(p&&!c.isanimating)return c.hideListBox("keyboard"),void(c._oldvalue=c.listBox.selectedValue);c.statusIconWapper.find(".icon").removeClass().addClass("icon-ok icon")}else if("27"==b.keyCode){var p="block"==c.container.css("display");if(p&&!c.isanimating){if(r.multiSelect)r.input.val(""),r.listBox.selectedValue=null;else{var q=c.listBox.getVisibleItem(c._oldvalue);if(q){var r=this;setTimeout(function(){r.autoComplete&&r._updateItemsVisibility(""),r.listBox.selectIndex(q.index),r.renderSelection("api")},r.closeDelay)}else c.clearSelection()}return c.hideListBox("keyboard"),c.renderSelection("api"),b.preventDefault(),!1}}else{c.isOpened()||c.opening||b.ctrlKey||c.listBox.visibleItems&&c.listBox.visibleItems.length>0&&c.input.val()!=c.searchString&&void 0!=c.searchString&&-1!=n&&c.showListBox("search"),c.searchString=c.input.val(),""==c.searchString&&(c.listBox.itemsByValue[""]||(n=-1,c.multiSelect||c.clearSelection()));var q=c.listBox.getVisibleItem(n);if(void 0!=q){if(c.typeahead){var s=c.input.position(),t=s.left,u=s.top;c.input.css("position","absolute"),c.input.css("left",t),c.input.css("top",u),c.input.css("z-index",10);var v=function(b,d,e){var f=b.top,g=b.left;c.typeaheadInput=a('<input class="typeahead"  style="position: absolute">'),c.typeaheadInput.css("background","transparent"),c.dropdownlistContent.append(c.typeaheadInput),c.typeaheadInput.css("left",g),c.typeaheadInput.css("top",f);var h=d.label;c.typeaheadInput.val(h),c.input.css("background","transparent")};(c.dropdownlistContent.find(".typeahead").length=0)?(v(s,q,c.searchString),c.changeStatusIcon&&c.statusIconWapper.find(".icon").removeClass().addClass("icon-edited icon")):(c.dropdownlistContent.find(".typeahead").remove(),v(s,q,c.searchString),c.changeStatusIcon&&c.statusIconWapper.find(".icon").removeClass().addClass("icon-edited icon"))}c._updateInputSelection()}else i.hideListBox("api"),i.changeStatusIcon&&i.statusIconWapper.find(".icon").removeClass().addClass("icon-error icon")}}}}}},removeTypeahead:function(){this.typeaheadInput&&this.typeahead&&(this.typeaheadInput.remove(),this.input.css("position","static"))}}),a.fn.combobox=function(b){var c,d=this;b.select&&(c=b.onSelect,delete b.onSelect),a(this).jqxComboBox(b),c&&a(this).on("select",c);var e=function(){a(d).addClass("combobox").addClass("dropdown").addClass("input-group").addClass("input-append").addClass("combobox-jqx").addClass("n-jqx-combobox");var c=a(d).find(".jqx-fill-state-normal-combobox");c.addClass("btn").addClass("btn-default").addClass("dropdown-toggle-jqx").addClass("dropdown-toggle"),a(d).find(".jqx-icon-arrow-down.jqx-icon").replaceWith('<span class="caret"></span>'),a(d).find("input").addClass("n-inputfield"),"menu-sm"===b.pattern&&a(d).find(".btn-group").addClass("n-combobutton-small"),b.typeahead&&a(d).find(".n-inputfield").css("padding-right",0)};a.extend({},{renderer:e},b),e()}});